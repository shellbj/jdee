####
#### Java Makefile automatically generated by jmaker 2.0
#### Creation date: Wed Mar 21 04:39:29 2001
####

RM = rm -f

#### Java compiler settings
DEVDIR = $(JDEDEV)
DEVDIRDOS = $(subst \,/,$(shell cygpath -w $(DEVDIR)))
JAVA_HOME = c:/java/jdk1.3.1
JAVAC       = $(JAVA_HOME)/bin/javac
JAVAC_FLAGS = -classpath "$(DEVDIRDOS)/jde/java/classes;$(DEVDIRDOS)/jde/java/src;$(JAVA_HOME)/lib/tools.jar" -g -d $(DEVDIRDOS)/jde/java/classes

#### Targets settings
SRC_FILES   =  	AttachShmem.java \
		AttachSocket.java \
		Break.java \
		CancelTraceClasses.java \
		CancelTraceMethods.java \
		CancelTraceThreads.java \
		Clear.java \
		DebugCommand.java \
		DebugCommandFactory.java \
		DebugProcessCommand.java \
		DebugSessionCommand.java \
		DebugThread.java \
		EvaluateExpression.java \
		Finish.java \
		GetArray.java \
		GetLoadedClasses.java \
		GetLocals.java \
		GetObject.java \
		GetObjectMonitors.java \
		GetPathInfo.java \
		GetString.java \
		GetThis.java \
		GetThread.java \
		GetThreads.java \
		Interrupt.java \
		KillThread.java \
		LaunchApplication.java \
		ListenShmem.java \
		ListenSocket.java \
		ProcessCommandHandler.java \
		Quit.java \
		Resume.java \
		Run.java Step.java \
		SessionCommandHandler.java \
		Suspend.java \
		TraceClasses.java \
		TraceExceptions.java \
		TraceMethods.java \
		TraceThreads.java \
		Watch.java

SUBDIRS       = 
SUBDIRS_CLEAN = $(patsubst %,%.clean,$(SUBDIRS))
SUBDIRS_MAKE  = $(patsubst %,%.make,$(SUBDIRS))
CLASSDIR = $(DEVDIR)/jde/java/classes

#### Main targets

# Default
all: $(SUBDIRS_MAKE)
	$(JAVAC) $(JAVAC_FLAGS) $(SRC_FILES)

# Cleanup
clean: $(SUBDIRS_CLEAN)
	$(RM) $(CLASSDIR)/jde/debugger/command/*.class
	@echo "Cleanup done."

# Rebuild
build: clean all
	@echo "Rebuild done."

#### Aux targets

# Files compilation
%.class: %.java
	$(JAVAC) $(JAVAC_FLAGS) $<

# Sub-directories compilation
%.make:
	$(MAKE) -k -C $(subst .make,,$@)

# Sub-directories cleanup
%.clean:
	$(MAKE) -k -C $(subst .clean,,$@) clean

# Phony Targets
.PHONY: clean build help

#### Help
help:
	@echo "Usage: make [targets...]"
	@echo ""
	@echo "where targets include:"
	@echo ""
	@echo "  help           display this help"
	@echo "  all            compile all (default)"
	@echo "  clean          remove all class files"
	@echo "  build          rebuild all inconditionnally"
	@echo "  <class file>   compile the given file"
	@echo "  <subdir>.make  compile the given subdir"
	@echo "  <subdir>.clean clean the given subdir"

